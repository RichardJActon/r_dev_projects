version: '3.4'

services:
  rstudiopreview:
    build:
      context: ./rstudio_docker
    container_name: rstudiopreview
    volumes:
      - ${PROJECT_VOL_PATH}:/home/${USERNAME}/project
      - /home/${USERNAME}/.ssh:/home/${USERNAME}/.ssh
      - /opt/local/renv/cache:/renv/cache
      - /home/${USERNAME}/r_dev_projects/rstudio_config_dir:/home/${USERNAME}/.config/rstudio
    restart:
      unless-stopped
    ports:
      - 8686:8787
    env_file: ./rstudio_docker/rstudio.env

